{% load static %}

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>{{ producto.nombre }} | Glowin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        .tonos-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 8px;
        }

        .tono-item {
            text-align: center;
            cursor: pointer;
        }

        .tono-color {
            width: 45px;
            height: 45px;
            border-radius: 10px;
            border: 2px solid transparent;
            margin-bottom: 4px;
            transition: border 0.2s ease, transform 0.2s ease;
        }

        .tono-item input[type="radio"] {
            display: none;
        }

        .tono-item input[type="radio"]:checked+.tono-color {
            border-color: #d63384;
            transform: scale(1.05);
        }

        .tono-nombre {
            font-size: 12px;
            color: #333;
        }
    </style>
</head>


<body class="bg-light">

    <div class="container mt-5">
        <div class="row">

            <!-- Imagen -->
            <div class="col-md-5">
                {% if producto.imagen %}
                <img src="{{ producto.imagen.url }}" class="img-fluid rounded shadow">
                {% else %}
                <img src="{% static 'img/sin_imagen.png' %}" class="img-fluid rounded shadow">
                {% endif %}
            </div>

            <!-- InformaciÃ³n -->
            <div class="col-md-7">

                <form method="post" action="{% url 'agregar_al_carrito' producto.id %}">
                    {% csrf_token %}

                    <h2>{{ producto.nombre }}</h2>
                    <h4 class="text-danger">$ {{ producto.precio }}</h4>
                    <p><strong>Marca:</strong> {{ producto.marca }}</p>
                    <p>{{ producto.descripcion }}</p>

                    <!-- Tallas -->
                    {% if producto.tallas.count %}
                    <label class="fw-bold">Talla:</label>
                    <select class="form-control mb-2" name="talla">
                        {% for t in producto.tallas.all %}
                        <option>{{ t.nombre }}</option>
                        {% endfor %}
                    </select>
                    {% endif %}

                    <!-- Colores -->
                    {% if producto.colores.count %}
                    <label class="fw-bold">Color:</label>
                    <select class="form-control mb-2" name="color">
                        {% for c in producto.colores.all %}
                        <option>{{ c.nombre }}</option>
                        {% endfor %}
                    </select>
                    {% endif %}

                    <!-- TONOS -->
                    {% if producto.tonos.count %}
                    <label class="fw-bold mt-2">Tonos disponibles:</label>
                    <div class="tonos-container">
                        {% for tono in producto.tonos.all %}
                        <label class="tono-item">
                            <input type="radio" name="tono" value="{{ tono.id }}">
                            <div class="tono-color" style="background-color: {{ tono.color }};"></div>
                            <div class="tono-nombre">{{ tono.nombre }}</div>
                        </label>
                        {% endfor %}
                    </div>
                    {% endif %}

                    <!-- Cantidad -->
                    <label class="fw-bold mt-3">Cantidad:</label>
                    <input type="number" name="cantidad" value="1" min="1" class="form-control mb-3"
                        style="width:120px;">

                    <!-- BotÃ³n -->
                    <button type="submit" class="btn btn-dark w-100">ðŸ›’ AÃ±adir al carrito</button>
                    <a href="/productos/" class="btn btn-outline-dark w-100 mt-2">Volver</a>

                </form>
            </div>
        </div>
    </div>

</body>

</html>