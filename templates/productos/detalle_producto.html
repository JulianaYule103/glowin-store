{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'productos/css/detalle_producto.css' %}">
{% endblock %}

{% block content %}

<div class="container product-page">
    <div class="row">

        <!-- Imagen -->
        <div class="col-md-5">
            {% if producto.imagen %}
            <img src="{{ producto.imagen.url }}" class="img-fluid rounded shadow">
            {% else %}
            <img src="{% static 'img/sin_imagen.png' %}" class="img-fluid rounded shadow">
            {% endif %}
        </div>

        <!-- InformaciÃ³n -->
        <div class="col-md-7">

            <form method="post" action="{% url 'agregar_al_carrito' producto.id %}">
                {% csrf_token %}

                <h2 class="product-title">{{ producto.nombre }}</h2>
                <h4 class="product-price">$ {{ producto.precio|floatformat:0 }}</h4>
                <p><strong>Marca:</strong> {{ producto.marca }}</p>
                <p class="product-description">{{ producto.descripcion }}</p>

                <!-- Tallas -->
                {% if producto.tallas.count %}
                <label class="fw-bold">Talla:</label>
                <select class="form-control mb-2" name="talla">
                    {% for t in producto.tallas.all %}
                    <option>{{ t.nombre }}</option>
                    {% endfor %}
                </select>
                {% endif %}

                <!-- Colores -->
                {% if producto.colores.count %}
                <label class="fw-bold">Color:</label>
                <select class="form-control mb-2" name="color">
                    {% for c in producto.colores.all %}
                    <option>{{ c.nombre }}</option>
                    {% endfor %}
                </select>
                {% endif %}

                <!-- Tonos -->
                {% if producto.tonos.count %}
                <label class="fw-bold mt-2">Tonos disponibles:</label>

                <div class="tonos-container">
                    {% for tono in producto.tonos.all %}
                    <label class="tono-item">
                        <input type="radio" name="tono" value="{{ tono.id }}">
                        <div class="tono-color" style="background-color: {{ tono.color }};"></div>
                        <div class="tono-nombre">{{ tono.nombre }}</div>
                    </label>
                    {% endfor %}
                </div>
                {% endif %}

                <!-- Cantidad -->
                <label class="fw-bold mt-3">Cantidad:</label>
                <input type="number" name="cantidad" value="1" min="1" class="form-control mb-3 qty-input">

                <!-- Botones -->
                <button type="submit" class="btn btn-dark w-100">ðŸ›’ AÃ±adir al carrito</button>

                <a onclick="history.back()" class="btn btn-outline-dark w-100 back-btn">
                    Volver
                </a>
            </form>

        </div>
    </div>
</div>

{% endblock %}